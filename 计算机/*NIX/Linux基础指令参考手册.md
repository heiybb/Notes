---
title: Linux基础指令参考手册
layout: post
tag: [Shell,参考手册,Linux]
---


每个Linux指令都直接对应一个可执行文件，所以实际上每次执行指令就是执行一个可执行文件，只是执行的时候一般在shell环境中。这篇文章是Linux基础命令参考手册，理论上大部分的Linux发行版默认就含有这些指令程序（当然我不可能测试每一个发行版，但大部分指令我都在Ubuntu和CentOS执行通过，实际上OSX也试过），而Shell一律只在Bash上测试。基本上这些命令及选项的使用率会占到90%，而对于一些用的不怎么多或者细节很繁杂的指令我都在另一篇[参考手册](扩充)中列出。



## 命令、管道与I/O

```
声明：下面在描述命令的时候，[]表示可选的参数，<>表示必须的参数

command [-option] [stream]：处理命令+处理方式+处理对象，一般命令格式
command_1 | command_2 | command ...：从左往右执行命令，结果作为下一条命令的输入

>：输出重定向，定向文件时会将信息覆盖到文件
>>：输出重定向，定向文件时会将信息写到文件末尾
<：输入重定向，一般定向文件，读取文件信息
<<：输入实时重定向，如何用看例子
\：命令分段

例子：
cat > catfile << "eof"  # 手动输入，直到输入eof时结束，将输入的内容写到catfile
```




## 通配符

```
/：选定文件层次分隔
..：选定上一层目录
.：选定当前目录
~：选定当前用户目录，加用户名跳转到相应用户主文件夹
-：选定前一个目录
*：通配任意长度任意字符
？：通配一个任意字符
^：对条件取反
[]：里面的语句用于单个字符的判断
[:digit:]：匹配数字
[:lower:]：匹配小写字母
[:upper:]：匹配大写字母
[:alnum:]：英文大小写及数字
[:alpha:]：英文大小写
[:blank:]：空格与Tab
[:cntrl:]：控制按键
[:graph:]：除空格与Tab外的所有键
[:print:]：任何可被打出的字符
[:punct:]：标点
[:space:]：任何可产生空白的字符
[:xdigit:]：16进制数字

例子：
ls [^[:digit:]]?*   # 显示当前目录下名字第一个字符不是数字且至少有两位的文件
```





## 帮助

```
man <command>：在单独页查看命令帮助
  -K <pattern>：搜索全部的man页面，匹配pattern，支持正则表达式（实际上就是通过grep来搜索的）

<command> --help：在本窗口显示简单帮助
```






## 目录操作

```
cd [dir]：
  跳转文件目录命令，支持通配符，进入的是通配到的第一个目录，bash内建命令，缺省的时候跳转到哪由当前系统的bash决定（一般是用户目录或根目录）

ls [-option] [file ...]：显示当前目录下的所有文件，file支持通配符
  -l：显示详细数据
  -a：显示所有文件（包括隐藏文件）
  -F：在不同类型的文件后面添加标识，目录后面加/，执行文件后加*等
  -i：显示inode信息
  -S：由大到小排序，默认是名字排序
  -t：通过最近修改时间排序
  -r：排序反向，基于-S或者-t
  -T：显示详细时间，基于-l
  -G：允许颜色显示，BSD（衍生至MAC）颜色变量为LSCOLORS，Linux为LS_COLORS
  -h：显示的时候以K、M、G等显示大小

dircolors：显示LS_COLORS值，MAC没有这个指令

pwd：显示当前路径名（完全名）

dirs：显示当前路径名（简化名），bash内建命令

例子：
ls -lrS：由小到大排序显示详情
ls -ltF |grep '/$'：只显示文件夹，显示详细信息，并按时间排序
```



## 文件及文件夹

```
mkdir [-option] <dir>：新建文件夹
  -m <power>：新建时设置权限，权限语法同chmod
  -p：自动建立不存在的多层目录文件

rmdir [-option] <dir>：删除空目录文件夹
  -p：连带删除上层空目录

touch：新建一个文件

rm [-option] <dir>：删除文件
  -r：递归删除，可用于删除文件
  -i：删除前询问 （养成输入该参数的习惯）
  -f：不提示任何信息

cp [-option] <source> <target>：复制文件
  -a：不改变属性复制
  -i：若目标文件已存在，提示是否覆盖（养成输入该参数的习惯）
  -r：递归复制（用于目录）

mv [-option] <source> <target>：移动/重命名文件
  -i：若目标文件已存在，提示是否覆盖（养成输入该参数的习惯）
  -u：比较新旧程度（判断是否需要升级）
  -f：强制覆盖


硬链接和软链接：
  Linux的文件信息都是通过唯一的inode标识，硬链接是和链接的原文件inode信息相同，这样访问文件的时候就不需要通过原文件，而软链接是通过原文件访问文件信息。硬链接只能在用一个文件系统中，所以不能跨文件系统也不能链接到目录


ln/link [-option] <file> <file>：创建硬链接
  -s：建立软链接，显然建立文件夹链接必须加这个


file：查看文件类型
```




## 搜索文件

```
which/whereis <file>：PATH变量中寻找可执行文件的位置，精确查找——不支持通配符和正则

locate [-option] <pattern>：通过搜索数据库（系统默认，如MAC下为/var/db/locate.database）进行模糊查找，支持通配符，Linux下有updatedb命令用于更新数据库，OSX下则是单独的脚本（一般为/usr/libexec/locate.updatedb）
  -i：忽略大小写
  -r：后面接正则表达式的显示方式，这个MAC不支持
  -d <database>：指定数据库查找

find：这个就是具体搜索文件了，细节太多，单独讲
```




## 解压缩

Linux有多种压缩解压缩工具，如compress、gzip、bzip2等，其中compress已经没人使用，大部分采用后两者，但由于两者的压缩算法不一样，所以两者的命令只能分别对应于不同类型的压缩文件（虽然文件的后缀和文件类型无关，但规范的习惯下文件后缀能标识文件类型），为了解决这个问题，就有了tar这个神器，他除了本身的打包功能外，还可以借助gzip和bzip2压缩解压文件，即一个命令解决所有的解压缩问题。

```
规范下的压缩后缀类型
  .Z：compress压缩的文件，已经绝迹
  .gz：gzip压缩的文件
  .bz2：bzip2压缩的文件
  .tar：tar程序打包的数据，打包没有压缩的性质
  .tar.gz：先tar打包，再gzip压缩
  .tar.bz2：先tar打包，再bzip2压缩

rar <file>：解压rar文件，默认下都没装这个程序，即使装在Linux下也不要用这个压缩文件了，用来解压就够了

unzip <file>：解压zip文件
  -d <location>：解压zip类型文件到指定文件夹

gzip：压缩成文件.gz，源文件会被删除
  -c：将压缩的文件输出到stdout

bzip2：解压文件

tar：打包命令，支持gzip和bzip2，所以只需要这个命令即可
  -z：当文件用gzip加压的时候，加这个参数直接进行解压后再进行解包
  -x：从归档文件中提取
  -v：处理文件时显示信息
  -f：输出结果到文件或设备（必须的参数）
  -C：切换到指定目录
  -c：创建新tar文档
  -u：更新tar文件
  -t：显示tar文件中的文件
```























## 数据的查看/分析/修改

```
stat：查看文件相关信息
cat：由第一行显示文件内容
  -b：显示非空白行行号
  -n：显示所有行号
tac：由最后一行显示内容
nl：显示的时候加上行号（可做修饰参数）（参数众多——设计多种风格行号显示）
more：一页一页显示（没有less灵活好用）
less：一页一页的显示（可做修饰参数）
  q：离开文件
head [-n] <file>：取出前面n行，缺省显示10行
tail [-n] <file>：取出末尾n行，缺省显示10行
od：二进制查看文件
diff：比较两个文件的内容
wc：统计文件信息
  -c：字节数
  -m：字符数
  -l：行数
  -L：最长行的长度
  -w：词数
sed：修改文件中的内容
awk
sort：直接排序（字符串）
  -n：按数值排序
  -M：按月排序
```
















## 磁盘管理

```
mount：挂载
  -t <文件类型>：
  -o <挂载形式>：

umount

df：显示磁盘使用信息
  -h：以G、M、等容易辨识的单位显示容量
  -i：以inode数量显示容量

du：显示当前目录下每个对象的大小（包含子对象）

dd：

fdisk：磁盘分区工具
```





## 进程管理

```
ps
  -A：查看完整进程
  -U <user>：显示user的所有进程
  -l：长格式输出，即输出相当完整的信息列
  -p：通过pid查找进程

top：显示进程信息（动态的，类似Windows任务管理器）

pgrep：通过程序查找进程

kill：杀进程

killall：


```








## 定时执行

```
crontab：定时执行相关程序或命令
  -u <user>：设定user用户的cron服务
  -e：编辑cron服务
  -l：列出cron服务
  -r：删除cron服务
  -i：删除cron服务前给出提示

  编辑时是以文件编辑的形式，其语法规则如下
    <Minute> <Hour> <Day> <Month> <Dayofweek> <command>
      "*"：代表所有的取值范围内的数字
      "/"：代表"每"
      "-"：代表从某个数字到某个数字
      ","：分开几个离散的数字

    30 7 8 * * ls：指定每月8号的7：30分执行ls命令
    */2 * * * * echo "Hello World."：每两分钟显示字符串
    1,2,3 * * * * echo "Hello World."：每小时的1,2,3分钟显示字符串
```













## 管理常用

```
sudo <command>：对当前操作赋予root权限

clear：清空当前屏幕

sync：同步内存数据到磁盘，关机前最好执行这个命令

shutdown [-h | -r]  <now | -t <time> | +time | 时间点> [warning]：关机
  -h：关掉服务，关机
  -r：关掉服务，重启
  -t <time>：time秒后执行操作，
  +time：time分钟后关机
  warning：执行操作前显示的警告字符串

reboot：重启系统

logout：纯Linux终端下注销用户

alias <command> <alias> ：为命令建立别名

type <command>：检查命令类型及位置（bash内置命令）

uname
  -r：查看当前内核号

history：查看命令历史

env：查看全部全局环境变量

bg <command>：后台执行命令

<command> &：后台执行命令，功能同bg

jobs：查看后台运行进程，最前面的[]中就是jobnumber，可被fg调用

fg [%jobnumber]：将进程调到前台执行，默认调取jobs信息中+标识的进程
  %jobnumber：通过jobnumber选择调取的进程

exec：不创建新进程直接覆盖执行，和Linux进程调度有关
```













## 其它

```
date：显示日期和时间

cal：显示日历

bc：直接进入计算器交互程序
  quit：离开
  scale=：设置精度
```
